<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seed Data - Tour Image Manager</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Kanit', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    
    .container {
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      padding: 40px;
      max-width: 600px;
      width: 100%;
    }
    
    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
    }
    
    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }
    
    .info-box {
      background: #f0f4ff;
      border-left: 4px solid #4a7ba7;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 4px;
    }
    
    .info-box h3 {
      color: #4a7ba7;
      font-size: 16px;
      margin-bottom: 8px;
    }
    
    .info-box p {
      color: #555;
      font-size: 14px;
      line-height: 1.6;
    }
    
    .btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      width: 100%;
      transition: transform 0.2s, box-shadow 0.2s;
      font-family: 'Kanit', sans-serif;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
    }
    
    .btn:active {
      transform: translateY(0);
    }
    
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .log-container {
      margin-top: 20px;
      background: #1e1e1e;
      border-radius: 8px;
      padding: 20px;
      max-height: 400px;
      overflow-y: auto;
      font-family: 'Monaco', 'Courier New', monospace;
      font-size: 13px;
      line-height: 1.6;
      display: none;
    }
    
    .log-container.show {
      display: block;
    }
    
    .log-line {
      color: #d4d4d4;
      margin-bottom: 4px;
    }
    
    .log-line.success {
      color: #4ec9b0;
    }
    
    .log-line.error {
      color: #f48771;
    }
    
    .log-line.warning {
      color: #dcdcaa;
    }
    
    .log-line.info {
      color: #569cd6;
    }
    
    .progress {
      margin-top: 20px;
      display: none;
    }
    
    .progress.show {
      display: block;
    }
    
    .progress-bar {
      width: 100%;
      height: 8px;
      background: #e0e0e0;
      border-radius: 4px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      width: 0%;
      transition: width 0.3s ease;
    }
    
    .progress-text {
      text-align: center;
      margin-top: 8px;
      color: #666;
      font-size: 14px;
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <h1>üå± Seed Data Generator</h1>
    <p class="subtitle">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Tour Image Manager</p>
    
    <div class="info-box">
      <h3>üìã ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á:</h3>
      <p>
        ‚Ä¢ 5 ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® (‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô, ‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ, ‡πÑ‡∏ó‡∏¢, ‡∏à‡∏µ‡∏ô, ‡πÑ‡∏ï‡πâ‡∏´‡∏ß‡∏±‡∏ô)<br>
        ‚Ä¢ 20 ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏±‡∏ß‡∏£‡πå‡∏û‡∏£‡πâ‡∏≠‡∏° URL ‡∏à‡∏£‡∏¥‡∏á<br>
        ‚Ä¢ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏° (‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á 90 ‡∏ß‡∏±‡∏ô)
      </p>
    </div>
    
    <button id="seedBtn" class="btn">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    
    <div id="progress" class="progress">
      <div class="progress-bar">
        <div id="progressFill" class="progress-fill"></div>
      </div>
      <div id="progressText" class="progress-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏≤‡∏£...</div>
    </div>
    
    <div id="logContainer" class="log-container"></div>
  </div>

  <script src="config.js"></script>
  <script src="api-service.js"></script>
  <script>
    const seedBtn = document.getElementById('seedBtn');
    const logContainer = document.getElementById('logContainer');
    const progress = document.getElementById('progress');
    const progressFill = document.getElementById('progressFill');
    const progressText = document.getElementById('progressText');
    
    function log(message, type = 'info') {
      const line = document.createElement('div');
      line.className = `log-line ${type}`;
      
      const icon = {
        success: '‚úÖ',
        error: '‚ùå',
        warning: '‚ö†Ô∏è',
        info: 'üìç'
      }[type] || '‚Ä¢';
      
      line.textContent = `${icon} ${message}`;
      logContainer.appendChild(line);
      logContainer.scrollTop = logContainer.scrollHeight;
    }
    
    function updateProgress(current, total, message) {
      const percent = Math.round((current / total) * 100);
      progressFill.style.width = `${percent}%`;
      progressText.textContent = message;
    }
    
    seedBtn.addEventListener('click', async function() {
      seedBtn.disabled = true;
      logContainer.innerHTML = '';
      logContainer.classList.add('show');
      progress.classList.add('show');
      
      log('üå± ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...', 'info');
      
      const countries = [
        { name: '‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô' },
        { name: '‡πÄ‡∏Å‡∏≤‡∏´‡∏•‡∏µ' },
        { name: '‡πÑ‡∏ó‡∏¢' },
        { name: '‡∏à‡∏µ‡∏ô' },
        { name: '‡πÑ‡∏ï‡πâ‡∏´‡∏ß‡∏±‡∏ô' }
      ];
      
      const images = [
        { file_name: '‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡πÑ‡∏ü‡∏ü‡∏π‡∏à‡∏¥-1', file_path: 'https://images.unsplash.com/photo-1490806843957-31f4c9a91c65?w=600', country_id: 1 },
        { file_name: 'Osaka-castle-‡∏õ‡∏£‡∏≤‡∏™‡∏≤‡∏ó‡πÇ‡∏≠‡∏ã‡∏≤‡∏Å‡πâ‡∏≤', file_path: 'https://images.unsplash.com/photo-1528360983277-13d401cdc186?w=600', country_id: 1 },
        { file_name: 'Tokyo-Tower-‡πÇ‡∏ï‡πÄ‡∏Å‡∏µ‡∏¢‡∏ß‡∏ó‡∏≤‡∏ß‡πÄ‡∏ß‡∏≠‡∏£‡πå', file_path: 'https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?w=600', country_id: 1 },
        { file_name: 'Kyoto-Temple-‡∏ß‡∏±‡∏î‡πÄ‡∏Å‡∏µ‡∏¢‡∏ß‡πÇ‡∏ï', file_path: 'https://images.unsplash.com/photo-1545569341-9eb8b30979d9?w=600', country_id: 1 },
        { file_name: 'Shibuya-Crossing-‡∏ä‡∏¥‡∏ö‡∏π‡∏¢‡πà‡∏≤', file_path: 'https://images.unsplash.com/photo-1542051841857-5f90071e7989?w=600', country_id: 1 },
        { file_name: 'Seoul-Tower-‡∏´‡∏≠‡∏Ñ‡∏≠‡∏¢‡πÇ‡∏ã‡∏•', file_path: 'https://images.unsplash.com/photo-1517154421773-0529f29ea451?w=600', country_id: 2 },
        { file_name: 'Gyeongbokgung-Palace-‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏ß‡∏±‡∏á‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏ö‡∏Å', file_path: 'https://images.unsplash.com/photo-1583417319070-4a69db38a482?w=600', country_id: 2 },
        { file_name: 'Busan-Beach-‡∏´‡∏≤‡∏î‡∏õ‡∏π‡∏ã‡∏≤‡∏ô', file_path: 'https://images.unsplash.com/photo-1578193661550-3d0e9a2a0f6e?w=600', country_id: 2 },
        { file_name: 'Jeju-Island-‡πÄ‡∏Å‡∏≤‡∏∞‡πÄ‡∏ä‡∏à‡∏π', file_path: 'https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=600', country_id: 2 },
        { file_name: 'Myeongdong-Shopping-‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á‡πÄ‡∏°‡∏µ‡∏¢‡∏á‡∏î‡∏á', file_path: 'https://images.unsplash.com/photo-1601024445121-e5b82f020549?w=600', country_id: 2 },
        { file_name: 'Grand-Palace-‡∏ß‡∏±‡∏î‡∏û‡∏£‡∏∞‡πÅ‡∏Å‡πâ‡∏ß', file_path: 'https://images.unsplash.com/photo-1563492065599-3520f775eeed?w=600', country_id: 3 },
        { file_name: 'Phuket-Beach-‡∏´‡∏≤‡∏î‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï', file_path: 'https://images.unsplash.com/photo-1589394815804-964ed0be2eb5?w=600', country_id: 3 },
        { file_name: 'Chiang-Mai-Temple-‡∏ß‡∏±‡∏î‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà', file_path: 'https://images.unsplash.com/photo-1552465011-b4e21bf6e79a?w=600', country_id: 3 },
        { file_name: 'Ayutthaya-Historical-Park-‡∏≠‡∏¢‡∏∏‡∏ò‡∏¢‡∏≤', file_path: 'https://images.unsplash.com/photo-1528181304800-259b08848526?w=600', country_id: 3 },
        { file_name: 'Floating-Market-‡∏ï‡∏•‡∏≤‡∏î‡∏ô‡πâ‡∏≥', file_path: 'https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?w=600', country_id: 3 },
        { file_name: 'Great-Wall-‡∏Å‡∏≥‡πÅ‡∏û‡∏á‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏à‡∏µ‡∏ô', file_path: 'https://images.unsplash.com/photo-1508804185872-d7badad00f7d?w=600', country_id: 4 },
        { file_name: 'Shanghai-Skyline-‡πÄ‡∏ã‡∏µ‡πà‡∏¢‡∏á‡πÑ‡∏Æ‡πâ', file_path: 'https://images.unsplash.com/photo-1474181487882-5abf3f0ba6c2?w=600', country_id: 4 },
        { file_name: 'Forbidden-City-‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏ß‡∏±‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏´‡πâ‡∏≤‡∏°', file_path: 'https://images.unsplash.com/photo-1547981609-4b6bfe67ca0b?w=600', country_id: 4 },
        { file_name: 'Taipei-101-‡πÑ‡∏ó‡πÄ‡∏õ-101', file_path: 'https://images.unsplash.com/photo-1590559899731-a382839e5549?w=600', country_id: 5 },
        { file_name: 'Taroko-Gorge-‡∏ó‡∏≤‡πÇ‡∏£‡πÇ‡∏Å‡∏∞', file_path: 'https://images.unsplash.com/photo-1562992932-a7b042e9d0c5?w=600', country_id: 5 }
      ];
      
      try {
        // Step 1: Create Countries
        log('üìç ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®...', 'info');
        updateProgress(0, countries.length + images.length, '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®...');
        
        const countryIds = [];
        for (let i = 0; i < countries.length; i++) {
          const country = countries[i];
          try {
            const response = await API.post(CONFIG.ENDPOINTS.COUNTRIES_CREATE, country);
            log(`‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®: ${country.name}`, 'success');
            if (response.id) {
              countryIds.push(response.id);
            }
            updateProgress(i + 1, countries.length + images.length, `‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® ${i + 1}/${countries.length}`);
            await new Promise(resolve => setTimeout(resolve, 300));
          } catch (error) {
            log(`‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® ${country.name} ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß`, 'warning');
          }
        }
        
        // Step 2: Create Images
        log('üñºÔ∏è ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û...', 'info');
        
        const imageIds = [];
        for (let i = 0; i < images.length; i++) {
          const image = images[i];
          const imageData = {
            ...image,
            updated_at: new Date(Date.now() - Math.random() * 90 * 24 * 60 * 60 * 1000).toISOString()
          };
          
          try {
            const response = await API.post(CONFIG.ENDPOINTS.IMAGES_CREATE, imageData);
            log(`‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û: ${image.file_name}`, 'success');
            if (response.id) {
              imageIds.push(response.id);
            }
            updateProgress(countries.length + i + 1, countries.length + images.length, `‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ${i + 1}/${images.length}`);
            await new Promise(resolve => setTimeout(resolve, 300));
          } catch (error) {
            log(`‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û: ${image.file_name} - ${error.message}`, 'error');
          }
        }
        
        log('üéâ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå!', 'success');
        log(`üìä ‡∏™‡∏£‡∏∏‡∏õ: ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏® ${countryIds.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£, ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ${imageIds.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`, 'info');
        log('‚ú® ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏•‡∏∞‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß!', 'success');
        
        updateProgress(countries.length + images.length, countries.length + images.length, '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå! üéâ');
        
        setTimeout(() => {
          if (confirm('‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß! ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
            window.location.href = 'index.html';
          }
        }, 1000);
        
      } catch (error) {
        log(`‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${error.message}`, 'error');
        seedBtn.disabled = false;
      }
    });
  </script>
</body>
</html>
