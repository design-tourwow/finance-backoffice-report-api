<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Tour Image Manager - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏±‡∏ß‡∏£‡πå Tourwow ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û" />
    <meta name="keywords" content="tour, image, manager, tourwow, ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û, ‡∏ó‡∏±‡∏ß‡∏£‡πå" />
    <meta name="author" content="Tourwow" />
    <meta name="theme-color" content="#4a7ba7" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Tour Image Manager - Tourwow" />
    <meta property="og:description" content="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏±‡∏ß‡∏£‡πå Tourwow ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û" />
    
    <!-- Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="dns-prefetch" href="https://images.unsplash.com" />
    
    <title>Tour Image Manager - Tourwow</title>
    
    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    
    <!-- Styles -->
    <link rel="stylesheet" href="tour-image-manager.css" />
    
    <!-- Configuration -->
    <!-- CRITICAL: Set API URL based on hostname BEFORE loading any other scripts -->
    <script>
      (function() {
        const hostname = window.location.hostname;
        
        // Hardcode API URLs based on hostname
        if (hostname === 'staging-finance-backoffice-report.vercel.app') {
          window.API_BASE_URL = 'https://fin-api-staging2.tourwow.com';
          window.ENVIRONMENT = 'staging';
          console.log('üéØ STAGING Environment - API:', window.API_BASE_URL);
        } else if (hostname === 'finance-backoffice-report.vercel.app') {
          window.API_BASE_URL = 'https://fin-api.tourwow.com';
          window.ENVIRONMENT = 'production';
          console.log('üéØ PRODUCTION Environment - API:', window.API_BASE_URL);
        } else {
          // Localhost fallback
          const sessionEnv = sessionStorage.getItem('env') || 'production';
          window.ENVIRONMENT = sessionEnv;
          window.API_BASE_URL = sessionEnv === 'staging' 
            ? 'https://fin-api-staging2.tourwow.com'
            : 'https://fin-api.tourwow.com';
          console.log('üéØ LOCALHOST Environment:', window.ENVIRONMENT, '- API:', window.API_BASE_URL);
        }
      })();
    </script>
    <script src="tour-image-manager-api.js?v=20241222-5"></script>
    
    <!-- Authentication Handler -->
    <script>
      (function() {
        // Handle authentication from URL parameters (optional)
        const urlParams = new URLSearchParams(window.location.search);
        const token = urlParams.get('token');
        const envParam = urlParams.get('env');
        
        if (token) {
          // Store token in sessionStorage
          sessionStorage.setItem('authToken', token);
          console.log('‚úÖ Token stored from URL parameter');
          
          // Remove token from URL for security
          window.history.replaceState({}, document.title, window.location.pathname);
        }
        
        // Note: Token validation will be handled by checkTokenAndLoadData() in tour-image-manager.js
        // If no token exists, it will show the token modal instead of redirecting
      })();
    </script>
    
    <!-- Load sidebar state before page renders to prevent flash -->
    <script>
      (function() {
        const savedState = localStorage.getItem('sidebar-collapsed');
        if (savedState === 'true') {
          document.documentElement.classList.add('sidebar-collapsed-init');
        }
      })();
    </script>
    <style>
      .sidebar-collapsed-init .app-wrapper {
        margin-left: 0 !important;
      }
      .sidebar-collapsed-init .sidebar {
        width: 0 !important;
        overflow: hidden !important;
        border-right: none !important;
      }
      .sidebar-collapsed-init .main-content {
        margin-left: 0 !important;
      }
    </style>
  </head>
  <body>
    <!-- Skip to main content -->
    <a href="#main-content" class="skip-link">‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>

    <div class="app-wrapper">
      <!-- Mobile Menu Toggle -->
      <button class="mobile-menu-toggle" aria-label="‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π" aria-expanded="false">
        <span class="hamburger-icon">
          <span></span>
          <span></span>
          <span></span>
        </span>
      </button>

      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar" role="navigation" aria-label="‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å">
        <div class="logo">
          <img src="https://financebackoffice-staging2.tourwow.com/assets/images/tourwow-logo.png" alt="Tourwow Logo" />
        </div>
        <nav class="nav-menu">
          <a href="/tour-image-manager" class="nav-item active" aria-current="page">Tour Image Manager</a>
        </nav>
        <button class="sidebar-toggle-btn" id="sidebarToggle" aria-label="‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π" title="‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
          <span>‡∏ã‡πà‡∏≠‡∏ô‡πÄ‡∏°‡∏ô‡∏π</span>
        </button>
      </aside>

      <!-- Main Content -->
      <main class="main-content" id="main-content" role="main">
        <!-- Top Bar -->
        <nav class="top-bar" role="banner">
          <div class="top-bar-container">
            <!-- Navigation Menu -->
            <ul class="navbar-list">
              <li class="navbar-item">
                <a href="/tour-image-manager" class="navbar-link active" aria-current="page">Tour Image Manager</a>
              </li>
              <!-- Example dropdown for future use -->
              <!--
              <li class="navbar-item">
                <button type="button" class="navbar-dropdown-toggle" data-dropdown="dropdown1">
                  Dropdown
                  <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 24 24" fill="none">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7"/>
                  </svg>
                </button>
                <div class="navbar-dropdown" id="dropdown1">
                  <ul>
                    <li><a href="#">Dashboard</a></li>
                    <li><a href="#">Settings</a></li>
                    <li><a href="#">Earnings</a></li>
                    <li><a href="#">Sign out</a></li>
                  </ul>
                </div>
              </li>
              -->
            </ul>
          </div>
        </nav>

        <!-- Content Area -->
        <div class="content-area">
          <!-- Breadcrumb -->
          <nav class="breadcrumb" aria-label="breadcrumb">
            <ol>
              <li><a href="#">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a></li>
              <li aria-current="page">Tour Image Manager</li>
            </ol>
          </nav>

          <!-- Page Header -->
          <header class="page-header">
            <svg class="page-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M4 16L8.586 11.414C9.367 10.633 10.633 10.633 11.414 11.414L16 16M14 14L15.586 12.414C16.367 11.633 17.633 11.633 18.414 12.414L20 14M14 8H14.01M6 20H18C19.105 20 20 19.105 20 18V6C20 4.895 19.105 4 18 4H6C4.895 4 4 4.895 4 6V18C4 19.105 4.895 20 6 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <h1>Tour Image Manager</h1>
          </header>

          <!-- Filter Section -->
          <section class="filter-section" aria-label="‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤">
            <h2>‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h2>
            <form class="filter-form" id="searchForm" novalidate>
              <!-- Row 1: 3 filters -->
              <div class="form-row">
                <div class="form-group">
                  <label for="wholesale">Wholesale</label>
                  <div class="multi-select-wrapper" id="wholesaleMultiSelect">
                    <div class="multi-select-trigger placeholder" tabindex="0" role="button" aria-haspopup="listbox" aria-expanded="false">
                      <span class="selected-text">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Wholesale</span>
                      <svg class="arrow" width="12" height="12" viewBox="0 0 12 12" fill="none">
                        <path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                    <div class="multi-select-dropdown" role="listbox">
                      <div class="multi-select-search">
                        <input type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤..." aria-label="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Wholesale">
                        <div class="multi-select-actions">
                          <button type="button" class="multi-select-action-btn select-all">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                          <button type="button" class="multi-select-action-btn deselect-all">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                        </div>
                      </div>
                      <div class="multi-select-options">
                        <div class="multi-select-option" data-value="ttn">
                          <input type="checkbox" id="wholesale-ttn" value="ttn">
                          <label for="wholesale-ttn">TTN PLUS</label>
                        </div>
                        <div class="multi-select-option" data-value="zego">
                          <input type="checkbox" id="wholesale-zego" value="zego">
                          <label for="wholesale-zego">ZEGO TRAVEL CO.,LTD.</label>
                        </div>
                      </div>
                    </div>
                  </div>
                  <input type="hidden" id="wholesale" name="wholesale" value="">
                </div>
                <div class="form-group">
                  <label for="country">‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®</label>
                  <div class="multi-select-wrapper" id="countryMultiSelect">
                    <div class="multi-select-trigger placeholder" tabindex="0" role="button" aria-haspopup="listbox" aria-expanded="false">
                      <span class="selected-text">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®</span>
                      <svg class="arrow" width="12" height="12" viewBox="0 0 12 12" fill="none">
                        <path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      </svg>
                    </div>
                    <div class="multi-select-dropdown" role="listbox">
                      <div class="multi-select-search">
                        <input type="text" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤..." aria-label="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®">
                        <div class="multi-select-actions">
                          <button type="button" class="multi-select-action-btn select-all">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                          <button type="button" class="multi-select-action-btn deselect-all">‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                        </div>
                      </div>
                      <div class="multi-select-options" id="countryOptions">
                        <!-- Options will be loaded dynamically -->
                      </div>
                    </div>
                  </div>
                  <input type="hidden" id="country" name="country" value="">
                </div>
                <div class="form-group">
                  <label for="tourCode">‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏±‡∏ß‡∏£‡πå</label>
                  <div class="autocomplete-wrapper">
                    <input type="text" id="tourCode" name="tourCode" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏±‡∏ß‡∏£‡πå" aria-label="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏±‡∏ß‡∏£‡πå" autocomplete="off" />
                    <div class="autocomplete-spinner" style="display: none;">
                      <div class="spinner"></div>
                    </div>
                    <div class="autocomplete-dropdown" id="tourCodeAutocomplete" style="display: none;"></div>
                  </div>
                  <span class="error-message" role="alert"></span>
                </div>
              </div>
              
              <!-- Row 2: 3 filters -->
              <div class="form-row">
                <div class="form-group">
                  <label for="imageName">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏π‡∏õ</label>
                  <div class="autocomplete-wrapper">
                    <input type="text" id="imageName" name="imageName" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏π‡∏õ" aria-label="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏π‡∏õ" autocomplete="off" />
                    <div class="autocomplete-spinner" style="display: none;">
                      <div class="spinner"></div>
                    </div>
                    <div class="autocomplete-dropdown" id="imageNameAutocomplete" style="display: none;"></div>
                  </div>
                  <span class="error-message" role="alert"></span>
                </div>
                <div class="form-group">
                  <label for="usageCount">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏ß‡∏°‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥</label>
                  <input type="number" id="usageCount" name="usageCount" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô" min="0" aria-label="‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏ß‡∏°‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥" />
                  <span class="error-message" role="alert"></span>
                </div>
                <div class="form-group">
                  <label for="dateRangePicker">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏π‡∏õ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</label>
                  <div class="date-picker-wrapper" id="customDatePicker">
                    <div class="date-icon" aria-hidden="true">
                      <svg width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 10h16m-8-3V4M7 7V4m10 3V4M5 20h14a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Zm3-7h.01v.01H8V13Zm4 0h.01v.01H12V13Zm4 0h.01v.01H16V13Zm-8 4h.01v.01H8V17Zm4 0h.01v.01H12V17Zm4 0h.01v.01H16V17Z"/>
                      </svg>
                    </div>
                    <input
                      id="dateRangePicker"
                      name="dateRange"
                      type="text"
                      class="date-input"
                      placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤"
                      readonly
                      aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤"
                      aria-describedby="dateRangeHelp"
                    />
                    <div id="calendarDropdown" class="calendar-dropdown" style="display: none;" role="dialog" aria-label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà"></div>
                  </div>
                  <span class="error-message" role="alert"></span>
                </div>
              </div>

              <!-- Row 3: Buttons -->
              <div class="form-row form-row-actions">
                <div class="form-actions">
                  <button type="submit" class="btn btn-primary" aria-label="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•">
                    <span class="btn-text">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</span>
                    <span class="btn-loader" aria-hidden="true"></span>
                  </button>
                  <button type="reset" class="btn btn-secondary" aria-label="‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
                </div>
              </div>
            </form>
          </section>

          <!-- Results Section -->
          <section class="results-section" aria-label="‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤">
            <div class="results-header">
              <h2 id="resultsCount">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏û‡∏ö : <span class="count">0</span> ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</h2>
              <div class="results-actions">
                <div class="sort-dropdown">
                  <button type="button" class="btn btn-secondary sort-btn" id="sortBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M3 6h18M7 12h10M11 18h2"/>
                    </svg>
                    <span class="sort-btn-text">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö</span>
                    <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 12 12" fill="none">
                      <path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="2"/>
                    </svg>
                  </button>
                  <div class="sort-menu" id="sortMenu">
                    <button type="button" class="sort-option" data-sort="date-desc">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                        <line x1="16" y1="2" x2="16" y2="6"/>
                        <line x1="8" y1="2" x2="8" y2="6"/>
                        <line x1="3" y1="10" x2="21" y2="10"/>
                      </svg>
                      ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï (‡πÉ‡∏´‡∏°‡πà-‡πÄ‡∏Å‡πà‡∏≤)
                    </button>
                    <button type="button" class="sort-option" data-sort="date-asc">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                        <line x1="16" y1="2" x2="16" y2="6"/>
                        <line x1="8" y1="2" x2="8" y2="6"/>
                        <line x1="3" y1="10" x2="21" y2="10"/>
                      </svg>
                      ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï (‡πÄ‡∏Å‡πà‡∏≤-‡πÉ‡∏´‡∏°‡πà)
                    </button>
                    <button type="button" class="sort-option" data-sort="usage-desc">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 20V10M12 20V4M6 20v-6"/>
                      </svg>
                      ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡∏°‡∏≤‡∏Å-‡∏ô‡πâ‡∏≠‡∏¢)
                    </button>
                    <button type="button" class="sort-option" data-sort="usage-asc">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 20v-6M12 20V4M6 20V10"/>
                      </svg>
                      ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡∏ô‡πâ‡∏≠‡∏¢-‡∏°‡∏≤‡∏Å)
                    </button>
                  </div>
                </div>
                <div class="export-dropdown">
                  <button type="button" class="btn btn-secondary export-btn" id="exportBtn">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                    </svg>
                    Export
                    <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 12 12" fill="none">
                      <path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="2"/>
                    </svg>
                  </button>
                  <div class="export-menu" id="exportMenu">
                    <button type="button" class="export-option" data-format="csv">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10 9 9 9 8 9"/>
                      </svg>
                      Export ‡πÄ‡∏õ‡πá‡∏ô CSV
                    </button>
                    <button type="button" class="export-option" data-format="pdf">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <line x1="10" y1="9" x2="8" y2="9"/>
                      </svg>
                      Export ‡πÄ‡∏õ‡πá‡∏ô PDF Report
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Table -->
            <div class="data-table" id="resultsTable">
              <!-- Table Header -->
              <div class="table-header" role="row">
                <div class="th th-number" role="columnheader">‡∏•‡∏≥‡∏î‡∏±‡∏ö</div>
                <div class="th th-image" role="columnheader">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</div>
                <div class="th th-details" role="columnheader">
                  ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏µ‡πà Active)
                </div>
                <div class="th th-programs" role="columnheader">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡∏ô‡∏µ‡πâ</div>
                <div class="th th-updated" role="columnheader">‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
              </div>

              <!-- Loading State (inside table, below header) -->
              <div class="loading-state" style="display: flex;" role="status" aria-live="polite">
                <div class="spinner"></div>
                <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
              </div>

              <!-- Empty State (inside table, below header) -->
              <div class="empty-state" style="display: none;" role="status">
                <div class="empty-state-content">
                  <div class="empty-icon-wrapper">
                    <img src="assets/images/no-result.svg" alt="‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•" class="empty-icon" width="240" height="240" />
                  </div>
                  <div class="empty-text">
                    <h3>‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
                    <p>‡∏•‡∏≠‡∏á‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏´‡∏°‡πà</p>
                  </div>
                </div>
              </div>

              <!-- Data will be loaded here dynamically -->
              
              <!-- Infinite Scroll Loading (inside table) -->
              <div class="infinite-scroll-loader" role="status" aria-live="polite">
                <div class="spinner"></div>
                <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°...</p>
              </div>

              <!-- End of Results (inside table) -->
              <div class="end-of-results" style="display: none;" role="status">
                <p>‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß</p>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal" style="display: none;">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-icon">
          <svg width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
            <path d="M21 3v5h-5"/>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
            <path d="M3 21v-5h5"/>
          </svg>
        </div>
        <div class="modal-header">
          <h3 class="modal-title">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</h3>
        </div>
        <div class="modal-body">
          <p>‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÉ‡∏ä‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?<br>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡πâ‡∏≤‡∏á</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="modalCancel">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
          <button type="button" class="btn btn-primary" id="modalConfirm">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
        </div>
      </div>
    </div>

    <!-- Image Preview Modal -->
    <div id="imagePreviewModal" class="image-modal" style="display: none;">
      <div class="image-modal-overlay"></div>
      <div class="image-modal-content">
        <!-- Header -->
        <div class="image-modal-header">
          <h3 class="image-modal-title" id="imageModalTitle">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</h3>
          <button type="button" class="image-modal-close" id="imageModalClose" aria-label="‡∏õ‡∏¥‡∏î">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
          </button>
        </div>

        <!-- Body -->
        <div class="image-modal-body">
          <!-- Image Container -->
          <div class="image-modal-image-container">
            <img id="imageModalImage" src="" alt="" class="image-modal-image" />
            
            <!-- Zoom Controls -->
            <div class="image-modal-zoom-controls">
              <button type="button" class="zoom-btn" id="zoomOut" aria-label="‡∏ã‡∏π‡∏°‡∏≠‡∏≠‡∏Å">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="M21 21l-4.35-4.35M8 11h6"/>
                </svg>
              </button>
              <span class="zoom-level" id="zoomLevel">100%</span>
              <button type="button" class="zoom-btn" id="zoomIn" aria-label="‡∏ã‡∏π‡∏°‡πÄ‡∏Ç‡πâ‡∏≤">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="M21 21l-4.35-4.35M11 8v6M8 11h6"/>
                </svg>
              </button>
              <button type="button" class="zoom-btn" id="zoomReset" aria-label="‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ã‡∏π‡∏°">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M1 4v6h6M23 20v-6h-6"/>
                  <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
                </svg>
              </button>
            </div>

            <!-- Navigation -->
            <button type="button" class="image-nav-btn prev" id="imagePrev" aria-label="‡∏£‡∏π‡∏õ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M15 18l-6-6 6-6"/>
              </svg>
            </button>
            <button type="button" class="image-nav-btn next" id="imageNext" aria-label="‡∏£‡∏π‡∏õ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ">
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 18l6-6-6-6"/>
              </svg>
            </button>
          </div>

          <!-- Info Panel -->
          <div class="image-modal-info">

            <div class="info-section">
              <h4>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</h4>
              <div class="info-item">
                <span class="info-label">‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå:</span>
                <span class="info-value" id="infoImageName">-</span>
              </div>
              <div class="info-item">
                <span class="info-label">‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®:</span>
                <span class="info-value" id="infoCountry">-</span>
              </div>
              <div class="info-item">
                <span class="info-label">Wholesale:</span>
                <span class="info-value" id="infoWholesale">-</span>
              </div>
              <div class="info-item">
                <span class="info-label">‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏±‡∏ß‡∏£‡πå:</span>
                <span class="info-value" id="infoTourCode">-</span>
              </div>
            </div>

            <div class="info-section">
              <h4>‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</h4>
              <div class="info-item">
                <span class="info-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏£‡∏ß‡∏°‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥:</span>
                <span class="info-value highlight" id="infoUsageCount">-</span>
              </div>
              <div class="info-item">
                <span class="info-label">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</span>
                <span class="info-value" id="infoLastUpdated">-</span>
              </div>
            </div>

            <div class="info-section">
              <h4>‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏£‡∏π‡∏õ‡∏ô‡∏µ‡πâ</h4>
              <div class="info-programs" id="infoPrograms">
                <p class="text-muted">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
              </div>
            </div>

            <!-- Actions -->
            <div class="image-modal-actions">
              <a href="#" class="btn btn-secondary" id="downloadImage" download>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                </svg>
                ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
              </a>
              <button type="button" class="btn btn-secondary" id="copyImageUrl">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                  <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                </svg>
                ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å URL
              </button>
            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- Token Input Modal -->
    <div id="tokenModal" class="modal" style="display: none;">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-icon">
          <svg width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="#4a7ba7" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
        </div>
        <div class="modal-header">
          <h3 class="modal-title">‡∏Å‡∏£‡∏≠‡∏Å API Token</h3>
        </div>
        <div class="modal-body">
          <p style="margin-bottom: 16px; color: #6b7280;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å Token ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
          <textarea 
            id="tokenInput" 
            placeholder="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..." 
            style="width: 100%; min-height: 120px; padding: 12px; border: 1px solid #d1d5db; border-radius: 4px; font-family: monospace; font-size: 13px; resize: vertical;"
          ></textarea>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" id="tokenSubmit">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
        </div>
      </div>
    </div>

    <script src="tour-image-manager.js?v=20241222-5"></script>
  </body>
</html>
