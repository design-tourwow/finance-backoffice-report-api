<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Tour Image Manager - จัดการรูปภาพทัวร์ Tourwow อย่างมีประสิทธิภาพ" />
    <meta name="keywords" content="tour, image, manager, tourwow, จัดการรูปภาพ, ทัวร์" />
    <meta name="author" content="Tourwow" />
    <meta name="theme-color" content="#4a7ba7" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Tour Image Manager - Tourwow" />
    <meta property="og:description" content="จัดการรูปภาพทัวร์ Tourwow อย่างมีประสิทธิภาพ" />
    
    <!-- Performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="dns-prefetch" href="https://images.unsplash.com" />
    
    <title>Tour Image Manager - Tourwow</title>
    
    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css" />
    
    <!-- Configuration -->
    <script src="config.js"></script>
    <script src="api-service.js"></script>
    <!-- <script src="mock-api.js"></script> --> <!-- Disabled: Using real API now -->
  </head>
  <body>
    <!-- Skip to main content -->
    <a href="#main-content" class="skip-link">ข้ามไปยังเนื้อหาหลัก</a>

    <div class="app-wrapper">
      <!-- Mobile Menu Toggle -->
      <button class="mobile-menu-toggle" aria-label="เปิด/ปิดเมนู" aria-expanded="false">
        <span class="hamburger-icon">
          <span></span>
          <span></span>
          <span></span>
        </span>
      </button>

      <!-- Sidebar -->
      <aside class="sidebar" id="sidebar" role="navigation" aria-label="เมนูหลัก">
        <div class="logo">
          <h1>tourwow</h1>
        </div>
        <nav class="nav-menu">
          <a href="#" class="nav-item">Dashboard</a>
          <a href="#" class="nav-item">Program Tour List</a>
          <a href="#" class="nav-item">Leads List</a>
          <a href="#" class="nav-item">Order List</a>
          <a href="#" class="nav-item">Work List</a>
          <a href="#" class="nav-item">Sales Funnel Report</a>
          <a href="#" class="nav-item">Customer Relation List</a>
          <a href="#" class="nav-item">Commission Report</a>
          <a href="#" class="nav-item">Telesales Report</a>
          <a href="#" class="nav-item">Cash Outflow Report</a>
          <a href="#" class="nav-item">Cash Inflow Report</a>
          <button class="nav-item expandable" aria-expanded="false">
            Finance Management
            <svg class="nav-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" aria-hidden="true">
              <path d="M4 2L8 6L4 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="nav-item expandable active" aria-expanded="true" aria-controls="product-submenu">
            Product Management
            <svg class="nav-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" aria-hidden="true">
              <path d="M2 4L6 8L10 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <div class="sub-menu" id="product-submenu" role="menu">
            <a href="#" class="nav-item sub-item active" aria-current="page">Tour Image Manager</a>
            <a href="#" class="nav-item sub-item">Product List</a>
            <a href="#" class="nav-item sub-item">Keyword List</a>
            <a href="#" class="nav-item sub-item">Period Management</a>
          </div>
          <button class="nav-item expandable" aria-expanded="false">
            R&D For IT
            <svg class="nav-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" aria-hidden="true">
              <path d="M4 2L8 6L4 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <button class="nav-item expandable" aria-expanded="false">
            Page Config
            <svg class="nav-icon" width="12" height="12" viewBox="0 0 12 12" fill="none" aria-hidden="true">
              <path d="M4 2L8 6L4 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <a href="#" class="nav-item">Count Leads Report</a>
          <a href="#" class="nav-item">Orders Count Report</a>
          <a href="#" class="nav-item">Order Report for wholesale Payment</a>
        </nav>
      </aside>

      <!-- Main Content -->
      <main class="main-content" id="main-content" role="main">
        <!-- Top Bar -->
        <div class="top-bar" role="banner"></div>

        <!-- Content Area -->
        <div class="content-area">
          <!-- Breadcrumb -->
          <nav class="breadcrumb" aria-label="breadcrumb">
            <ol>
              <li><a href="#">หน้าแรก</a></li>
              <li aria-current="page">Tour Image Manager</li>
            </ol>
          </nav>

          <!-- Page Header -->
          <header class="page-header">
            <svg class="page-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" aria-hidden="true">
              <path d="M4 16L8.586 11.414C9.367 10.633 10.633 10.633 11.414 11.414L16 16M14 14L15.586 12.414C16.367 11.633 17.633 11.633 18.414 12.414L20 14M14 8H14.01M6 20H18C19.105 20 20 19.105 20 18V6C20 4.895 19.105 4 18 4H6C4.895 4 4 4.895 4 6V18C4 19.105 4.895 20 6 20Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <h1>Tour Image Manager</h1>
          </header>

          <!-- Filter Section -->
          <section class="filter-section" aria-label="ฟอร์มค้นหา">
            <h2>ค้นหาข้อมูล</h2>
            <form class="filter-form" id="searchForm" novalidate>
              <!-- Row 1: 3 filters -->
              <div class="form-row">
                <div class="form-group">
                  <label for="wholesale">Wholesale</label>
                  <select id="wholesale" name="wholesale" aria-label="เลือก Wholesale">
                    <option value="" disabled selected hidden>เลือก Wholesale (ทั้งหมด)</option>
                    <option value="all">ทั้งหมด</option>
                    <option value="ttn">TTN PLUS</option>
                    <option value="zego">ZEGO TRAVEL CO.,LTD.</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="country">ประเทศ</label>
                  <select id="country" name="country" aria-label="เลือกประเทศ">
                    <option value="" disabled selected hidden>เลือกประเทศ (ทั้งหมด)</option>
                    <option value="all">ทั้งหมด</option>
                    <option value="jp">ญี่ปุ่น</option>
                    <option value="kr">เกาหลี</option>
                    <option value="th">ไทย</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="tourCode">รหัสทัวร์</label>
                  <input type="text" id="tourCode" name="tourCode" placeholder="กรอกรหัสทัวร์" aria-label="กรอกรหัสทัวร์" />
                  <span class="error-message" role="alert"></span>
                </div>
              </div>
              
              <!-- Row 2: 3 filters -->
              <div class="form-row">
                <div class="form-group">
                  <label for="imageName">ชื่อรูป</label>
                  <input type="text" id="imageName" name="imageName" placeholder="กรอกชื่อรูป" aria-label="กรอกชื่อรูป" />
                  <span class="error-message" role="alert"></span>
                </div>
                <div class="form-group">
                  <label for="usageCount">จำนวนรวมใช้ซ้ำ</label>
                  <input type="number" id="usageCount" name="usageCount" placeholder="กรอกจำนวน" min="0" aria-label="กรอกจำนวนรวมใช้ซ้ำ" />
                  <span class="error-message" role="alert"></span>
                </div>
                <div class="form-group">
                  <label for="dateRangePicker">วันที่อัปเดตรูปล่าสุด</label>
                  <div class="date-picker-wrapper" id="customDatePicker">
                    <div class="date-icon" aria-hidden="true">
                      <svg width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 10h16m-8-3V4M7 7V4m10 3V4M5 20h14a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1Zm3-7h.01v.01H8V13Zm4 0h.01v.01H12V13Zm4 0h.01v.01H16V13Zm-8 4h.01v.01H8V17Zm4 0h.01v.01H12V17Zm4 0h.01v.01H16V17Z"/>
                      </svg>
                    </div>
                    <input
                      id="dateRangePicker"
                      name="dateRange"
                      type="text"
                      class="date-input"
                      placeholder="เลือกช่วงเวลา"
                      readonly
                      aria-label="เลือกช่วงเวลา"
                      aria-describedby="dateRangeHelp"
                    />
                    <div id="calendarDropdown" class="calendar-dropdown" style="display: none;" role="dialog" aria-label="เลือกช่วงวันที่"></div>
                  </div>
                  <span class="error-message" role="alert"></span>
                </div>
              </div>

              <!-- Row 3: Buttons -->
              <div class="form-row form-row-actions">
                <div class="form-actions">
                  <button type="submit" class="btn btn-primary" aria-label="ค้นหาข้อมูล">
                    <span class="btn-text">ค้นหา</span>
                    <span class="btn-loader" aria-hidden="true"></span>
                  </button>
                  <button type="reset" class="btn btn-secondary" aria-label="รีเซ็ตฟอร์ม">รีเซ็ต</button>
                </div>
              </div>
            </form>
          </section>

          <!-- Results Section -->
          <section class="results-section" aria-label="ผลการค้นหา">
            <div class="results-header">
              <h2 id="resultsCount">ผลการค้นหาพบ : <span class="count">0</span> รูปภาพ</h2>
            </div>

            <!-- Table -->
            <div class="data-table" id="resultsTable">
              <!-- Table Header -->
              <div class="table-header" role="row">
                <div class="th th-number" role="columnheader">ลำดับ</div>
                <div class="th th-image" role="columnheader">ข้อมูลรูปภาพ</div>
                <div class="th th-details" role="columnheader">
                  ข้อมูลการใช้รูปภาพ (เฉพาะโปรแกรมที่ Active)
                </div>
                <div class="th th-programs" role="columnheader">ข้อมูลโปรแกรมที่ใช้รูปนี้</div>
              </div>

              <!-- Loading State (inside table, below header) -->
              <div class="loading-state" style="display: flex;" role="status" aria-live="polite">
                <div class="spinner"></div>
                <p>กำลังโหลดข้อมูล...</p>
              </div>

              <!-- Empty State (inside table, below header) -->
              <div class="empty-state" style="display: none;" role="status">
                <svg class="empty-icon" width="64" height="64" viewBox="0 0 64 64" fill="none" aria-hidden="true">
                  <path d="M32 8C18.745 8 8 18.745 8 32C8 45.255 18.745 56 32 56C45.255 56 56 45.255 56 32C56 18.745 45.255 8 32 8ZM32 52C20.954 52 12 43.046 12 32C12 20.954 20.954 12 32 12C43.046 12 52 20.954 52 32C52 43.046 43.046 52 32 52Z" fill="#D1D5DB"/>
                  <path d="M24 28C25.105 28 26 27.105 26 26C26 24.895 25.105 24 24 24C22.895 24 22 24.895 22 26C22 27.105 22.895 28 24 28Z" fill="#D1D5DB"/>
                  <path d="M40 28C41.105 28 42 27.105 42 26C42 24.895 41.105 24 40 24C38.895 24 38 24.895 38 26C38 27.105 38.895 28 40 28Z" fill="#D1D5DB"/>
                  <path d="M32 44C27.582 44 23.73 41.418 22 37.5H42C40.27 41.418 36.418 44 32 44Z" fill="#D1D5DB"/>
                </svg>
                <h3>ไม่พบข้อมูล</h3>
                <p>ลองปรับเปลี่ยนเงื่อนไขการค้นหาและลองใหม่อีกครั้ง</p>
              </div>

              <!-- Data will be loaded here dynamically -->
              
              <!-- Infinite Scroll Loading (inside table) -->
              <div class="infinite-scroll-loader" role="status" aria-live="polite">
                <div class="spinner"></div>
                <p>กำลังโหลดข้อมูลเพิ่มเติม...</p>
              </div>

              <!-- End of Results (inside table) -->
              <div class="end-of-results" style="display: none;" role="status">
                <p>แสดงข้อมูลครบทั้งหมดแล้ว</p>
              </div>
            </div>
          </section>
        </div>
      </main>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal" style="display: none;">
      <div class="modal-overlay"></div>
      <div class="modal-content">
        <div class="modal-icon">
          <svg width="56" height="56" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/>
            <path d="M21 3v5h-5"/>
            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/>
            <path d="M3 21v-5h5"/>
          </svg>
        </div>
        <div class="modal-header">
          <h3 class="modal-title">ยืนยันการรีเซ็ต</h3>
        </div>
        <div class="modal-body">
          <p>คุณต้องการรีเซ็ตฟอร์มการค้นหาใช่หรือไม่?<br>ข้อมูลที่กรอกทั้งหมดจะถูกล้าง</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" id="modalCancel">ยกเลิก</button>
          <button type="button" class="btn btn-primary" id="modalConfirm">รีเซ็ต</button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>
  </body>
</html>
